<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>ì˜¤ëŠ˜ì˜ ì„ íƒ Â· ë½ìŠ¤íƒ€ë¥¼ ê¿ˆê¾¸ëŠ” ì†Œë…€</title>

  <style>
    * { box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, "Noto Sans KR", sans-serif; }
    html, body { height: 100%; }
    body {
      margin: 0;
      background: #000;
      color: #fff;
      overflow-x: hidden;
    }

    /* ===== í’€ìŠ¤í¬ë¦° ìŠ¤í…Œì´ì§€ ===== */
    .stage {
      position: fixed;
      inset: 0;
      overflow: hidden;
    }

    /* ë°°ê²½ */
    .bg {
      position: absolute;
      inset: 0;
      background: url("./assets/character/bg/stage_vertical.png") center / cover no-repeat;
      filter: brightness(0.75);
      transform: scale(1.02); /* ê°€ì¥ìë¦¬ ë¹ˆí‹ˆ ë°©ì§€ */
    }

    /* ìºë¦­í„° ë ˆì´ì–´ ê·¸ë£¹ */
    .character {
      position: absolute;
      inset: 0;
      pointer-events: none;
    }

    /* ê³µí†µ ë ˆì´ì–´ ì´ë¯¸ì§€ */
    .layer {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      height: auto;
      image-rendering: auto;
      filter: drop-shadow(0 10px 25px rgba(0,0,0,0.55));
    }

    /*
      âœ… í•µì‹¬: "ì„¸ë¡œëª¨ë“œ ê¸°ì¤€"ìœ¼ë¡œ ë¹„ìœ¨/ìœ„ì¹˜ë¥¼ ê³ ì •
      - top / widthë§Œ ì¡°ì •í•˜ë©´ ë¨
      - ì¼ë‹¨ ìì—°ìŠ¤ëŸ½ê²Œ ë³´ì´ëŠ” ê¸°ë³¸ê°’ì„ ë„£ì–´ë‘ 
    */

    /* ëª¸í†µ */
    .body {
      top: 10vh;
      width: min(92vw, 520px);
      opacity: 0.98;
    }

    /* ê¸°íƒ€ */
    .guitar {
      top: 22vh;
      width: min(98vw, 560px);
    }

    /* í”„ë › ì¡ëŠ” íŒ” */
    .fret-arm {
      top: 20vh;
      width: min(98vw, 560px);
    }

    /* í”¼í‚¹ íŒ”(ì‚´ì§ í”ë“¤ë¦¬ê²Œ) */
    .pick-arm {
      top: 26vh;
      width: min(98vw, 560px);
      transform: translateX(-50%) rotate(0deg);
      transform-origin: 60% 40%;
      animation: pick 1.2s ease-in-out infinite;
      opacity: 0.98;
    }

    @keyframes pick {
      0%   { transform: translateX(-50%) rotate(-1.2deg); }
      50%  { transform: translateX(-50%) rotate( 1.2deg); }
      100% { transform: translateX(-50%) rotate(-1.2deg); }
    }

    /* ===== UI ì¹´ë“œ(ì§ˆë¬¸/ì‹œì‘) ===== */
    .ui {
      position: absolute;
      left: 50%;
      bottom: env(safe-area-inset-bottom);
      transform: translateX(-50%);
      width: min(92vw, 520px);
      padding: 0 0 18px;
    }

    .card {
      margin: 0 auto;
      padding: 18px 16px;
      background: rgba(10, 10, 12, 0.72);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 18px;
      box-shadow: 0 18px 60px rgba(0,0,0,0.55);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    h1 {
      font-size: 18px;
      margin: 0 0 10px;
      line-height: 1.25;
    }

    p { margin: 0 0 10px; opacity: 0.85; }

    label { display: block; margin-top: 12px; font-size: 13px; opacity: 0.85; }
    input, select {
      width: 100%;
      margin-top: 6px;
      padding: 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.08);
      background: rgba(0,0,0,0.35);
      color: #fff;
      font-size: 16px;
      outline: none;
    }

    .row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }

    button {
      width: 100%;
      margin-top: 14px;
      padding: 14px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.10);
      font-size: 16px;
      cursor: pointer;
      background: rgba(255,255,255,0.10);
      color: #fff;
    }
    button.primary { background: rgba(255,255,255,0.18); }
    button:active { transform: scale(0.99); }

    /* ì§ˆë¬¸ */
    #questionScreen { display: none; }
    .progress { font-size: 12px; opacity: 0.7; margin-bottom: 8px; }

    .option {
      margin-top: 10px;
      padding: 14px;
      border-radius: 14px;
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.08);
      cursor: pointer;
      user-select: none;
    }
    .option:hover { background: rgba(255,255,255,0.12); }

    /* ìƒë‹¨ íƒ€ì´í‹€(ì‘ê²Œ) */
    .titlebar {
      position: absolute;
      left: 14px;
      top: env(safe-area-inset-top);
      padding-top: 10px;
      font-size: 14px;
      opacity: 0.9;
      text-shadow: 0 4px 18px rgba(0,0,0,0.8);
    }
    .titlebar small { display:block; opacity:0.7; margin-top:4px; }

  </style>
</head>

<body>
  <div class="stage">
    <div class="bg"></div>

    <!-- âœ… ìºë¦­í„° ë ˆì´ì–´ -->
    <div class="character">
      <!-- ì•„ë˜ 4ê°œ ì¤‘ "ì—†ëŠ” íŒŒì¼"ì€ ì§€ì›Œë„ ë¨ -->
      <img class="layer body"     src="./assets/character/rockstar_body.png"   alt="rockstar body" />
      <img class="layer guitar"   src="./assets/character/rockstar_guitar.png" alt="guitar" />
      <img class="layer fret-arm" src="./assets/character/rockstar_fret_arm.png" alt="fret arm" />
      <img class="layer pick-arm" src="./assets/character/rockstar_pick_arm.png" alt="pick arm" />
    </div>

    <div class="titlebar">
      ğŸ¸ ì˜¤ëŠ˜ì˜ì„ íƒ Â· ë½ìŠ¤íƒ€ë¥¼ ê¿ˆê¾¸ëŠ” ì†Œë…€
      <small>í”„ë¡œí† íƒ€ì… Â· ì„ íƒì´ ëˆ„ì ë˜ëŠ” ê²Œì„</small>
    </div>

    <!-- UI -->
    <div class="ui">
      <!-- ì‹œì‘ -->
      <div class="card" id="startScreen">
        <h1>ì‹œì‘ ì„¤ì •</h1>
        <p>ë‹‰ë„¤ì„ / ë‚˜ì´ / ì„±ë³„ì„ ì •í•˜ë©´ ì‹œì‘ë©ë‹ˆë‹¤.</p>

        <label>ë‹‰ë„¤ì„</label>
        <input id="nickname" placeholder="ì˜ˆ: ê°€ë„¤íŠ¸" />

        <div class="row">
          <div>
            <label>ë‚˜ì´</label>
            <input id="age" type="number" placeholder="ì˜ˆ: 34" />
          </div>
          <div>
            <label>ì„±ë³„</label>
            <select id="gender">
              <option value="ì—¬">ì—¬</option>
              <option value="ë‚¨">ë‚¨</option>
              <option value="ê¸°íƒ€">ê¸°íƒ€</option>
            </select>
          </div>
        </div>

        <button class="primary" onclick="startGame()">ê²Œì„ ì‹œì‘</button>
        <button onclick="resetGame()">ì „ì²´ ì‚­ì œ</button>

        <p style="font-size:12px;opacity:0.65;margin-top:10px;">
          ì €ì¥: ë¸Œë¼ìš°ì €(LocalStorage)
        </p>
      </div>

      <!-- ì§ˆë¬¸ -->
      <div class="card" id="questionScreen">
        <div class="progress" id="progressText"></div>
        <h1 id="questionText"></h1>
        <div id="options"></div>

        <button style="margin-top:14px" onclick="resetGame()">ì§„í–‰ ì´ˆê¸°í™”</button>
      </div>
    </div>
  </div>

  <script>
    // âœ… ì—¬ê¸°ë§Œ 15ê°œë¡œ ëŠ˜ë¦¬ë©´ ë¨ (ì¼ë‹¨ ìƒ˜í”Œ 3ê°œ)
    const questions = [
      { q: "ê¸°íƒ€ í†¤ì´ ë§ˆìŒì— ì•ˆ ë“¤ ë•Œ, ì²« ì ê²€ì€?", a: ["ë³¼ë¥¨/í†¤/í”½ì—… í¬ì§€ì…˜", "ì•°í”„ EQë¥¼ ê·¹ë‹¨ìœ¼ë¡œ", "ì¼€ì´ë¸”Â·ë…¸ì´ì¦ˆÂ·ì ‘ì´‰ë¶€í„°"] },
      { q: "ì²« í•©ì£¼ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ íƒœë„ëŠ”?", a: ["ë¦¬ë“¬ ìœ ì§€ê°€ ìš°ì„ ", "ì¡´ì¬ê°ìœ¼ë¡œ ëŒê³  ê°„ë‹¤", "íŒ€ì›Œí¬ë¡œ ë¹ˆí‹ˆì„ ë©”ìš´ë‹¤"] },
      { q: "ë¬´ëŒ€ ì „ ê°€ì¥ ë¨¼ì € í•˜ëŠ” ì¼ì€?", a: ["íŠœë‹", "ìŠ¤íŠ¸ë ˆì¹­", "ì…‹ë¦¬ìŠ¤íŠ¸/íì‹œíŠ¸ í™•ì¸"] }
    ];

    let current = 0;

    // ì €ì¥ëœ í”Œë ˆì´ì–´ ìˆìœ¼ë©´ ë°”ë¡œ ì§ˆë¬¸ í™”ë©´ìœ¼ë¡œ ì§„ì…(ì›í•˜ë©´ ë„ë©´ ë¨)
    (function boot() {
      const saved = localStorage.getItem("player");
      if (saved) {
        document.getElementById("startScreen").style.display = "none";
        document.getElementById("questionScreen").style.display = "block";
        current = 0;
        renderQuestion();
      }
    })();

    function startGame() {
      const nickname = document.getElementById("nickname").value.trim();
      const age = document.getElementById("age").value.trim();

      if (!nickname || !age) {
        alert("ë‹‰ë„¤ì„ê³¼ ë‚˜ì´ë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
        return;
      }

      localStorage.setItem("player", JSON.stringify({
        nickname,
        age,
        gender: document.getElementById("gender").value
      }));

      document.getElementById("startScreen").style.display = "none";
      document.getElementById("questionScreen").style.display = "block";

      current = 0;
      renderQuestion();
    }

    function renderQuestion() {
      const q = questions[current];
      document.getElementById("progressText").innerText = `Q ${current + 1} / ${questions.length}`;
      document.getElementById("questionText").innerText = q.q;

      const optBox = document.getElementById("options");
      optBox.innerHTML = "";

      q.a.forEach((text) => {
        const div = document.createElement("div");
        div.className = "option";
        div.innerText = text;
        div.onclick = nextQuestion;
        optBox.appendChild(div);
      });
    }

    function nextQuestion() {
      current++;
      if (current >= questions.length) {
        alert("í”„ë¡œí† íƒ€ì… ë! (ì—”ë”© ì—†ìŒ)");
        current = 0;
      }
      renderQuestion();
    }

    function resetGame() {
      localStorage.clear();
      location.reload();
    }
  </script>
</body>
</html>
